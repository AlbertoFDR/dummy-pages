<!DOCTYPE html>
<html>
	<body>
	
		<h1>Checking Permission Policy in static-generated <b>iframes</b></h1>
		<div id="intro">
			
		</div>
		<hr>
		<div id='iframe'>
			<!-- Geolocation -->
			<iframe src="http://10.48.1.104:1234/iframes/permissions-geolocation-iframe.html" height=800 width=800 allow="geolocation"></iframe>
			<!-- All permissions -->
			<iframe src="http://10.48.1.104:1234/iframes/permissions-all-iframe.html" height=800 width=800 allow="accelerometer; ambient-light-sensor; autoplay; battery camera; display-capture; document-domain; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; local-fonts; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-create; publickey-credentials-get; screen-wake-lock; serial; speaker-selection; usb; web-share; xr-spatial-tracking"></iframe>
			<!-- Geolocation in random origin -->
			<iframe src="http://10.48.1.104:1234/iframes/permissions-origin-iframe.html" height=800 width=800 allow="geolocation=(https://example.com/)"></iframe>
			<!-- Sandbox -->
			<iframe src="http://10.48.1.104:1234/iframes/permissions-geolocation-iframe.html" height=800 width=800 allow sandbox name="Super Wonderful Name"></iframe>
			<!-- Sandbox -->
			<iframe src="http://10.48.1.104:1234/iframes/permissions-geolocation-iframe.html" height=800 width=800 allow sandbox="allow-scripts allow-forms" name="Super Wonderful Name for Iframe"></iframe>
		</div>
		<script>
			div = document.getElementById('intro');
			var div_iframe = document.getElementById('iframe');
			// Get the permission for geolocation
			// it will appear a popup
			navigator.geolocation.getCurrentPosition(
				(pos) => {
					console.log(pos.coords);
					p = document.createElement('p');
					div = document.getElementById('intro');
					div.textContent += `Your coords are ${pos.coords.latitude} lat and ${pos.coords.longitude} long.`
				}
			);
		</script>
	</body>
</html>
